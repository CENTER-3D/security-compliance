---

copyright:
  years: 2021
lastupdated: "2021-02-17"

keywords: data encryption in {{site.data.keyword.compliance_short}}, data storage for {{site.data.keyword.compliance_short}}, personal data in {{site.data.keyword.compliance_short}}, data deletion for {{site.data.keyword.compliance_short}}, data in {{site.data.keyword.compliance_short}}, data security in {{site.data.keyword.compliance_short}}, BYOK, KYOK

subcollection: security-compliance

---

{:codeblock: .codeblock}
{:screen: .screen}
{:download: .download}
{:external: target="_blank" .external}
{:faq: data-hd-content-type='faq'}
{:gif: data-image-type='gif'}
{:important: .important}
{:note: .note}
{:pre: .pre}
{:tip: .tip}
{:preview: .preview}
{:deprecated: .deprecated}
{:beta: .beta}
{:term: .term}
{:shortdesc: .shortdesc}
{:script: data-hd-video='script'}
{:support: data-reuse='support'}
{:table: .aria-labeledby="caption"}
{:troubleshoot: data-hd-content-type='troubleshoot'}
{:help: data-hd-content-type='help'}
{:tsCauses: .tsCauses}
{:tsResolve: .tsResolve}
{:tsSymptoms: .tsSymptoms}
{:java: .ph data-hd-programlang='java'}
{:javascript: .ph data-hd-programlang='javascript'}
{:swift: .ph data-hd-programlang='swift'}
{:curl: .ph data-hd-programlang='curl'}
{:video: .video}
{:step: data-tutorial-type='step'}
{:tutorial: data-hd-content-type='tutorial'}
{:ui: .ph data-hd-interface='ui'}
{:cli: .ph data-hd-interface='cli'}
{:api: .ph data-hd-interface='api'}



# Storing and encrypting data in {{site.data.keyword.compliance_short}}
{: #data-storage}

To ensure that your data is securely managed when you use the {{site.data.keyword.compliance_full}}, it is important to know exactly what data is stored and encrypted. The {{site.data.keyword.compliance_short}} stores your data in a highly available and secure environment.

For more information about how {{site.data.keyword.cloud_notm}} platform secures your data, see [How do I know that my data is safe?](/docs/overview?topic=overview-security)
{: tip}



## Storing and encrypting credentials
{: #credential-security}

When you work with the {{site.data.keyword.compliance_short}}, you provide credentials that allow a collector to access and scan your IT resources. The credentials that you provide might be an API key or a username and password. The {{site.data.keyword.compliance_short}} securely stores your credentials and prevents anyone from accessing them - including IBM.

All collector-to-service communication is performed over a TLS 1.2+ protected channel. In addition to that, each request is cryptographically signed by the collectors private key and the signature is validated by the service by using the collectors public key. At no time are your credentials available in clear text while stored or used by the service.



## Storing and encrypting results
{: #results-security}

Depending on the component of the {{site.data.keyword.compliance_short}} that you're working with, the results are stored and encrypted differently.

### Security and compliance posture monitoring
{: #posture-results-security}

The configuration information and metadata that is gathered by the service for security and compliance posture monitoring:

* Does contain personally identifiable information.
* Is sent over a TLS 1.2+ protected channel by using IBM Cloud Internet Services (powered by Cloudflare). By using Cloud Internet Services there is DDoS protection, a Web Application Firewall, and other network level security mechanisms in place.
* Is cryptographically signed by the collector's private key.
* Is validated by the service with the collector's public key.
* Is stored by the service for 30 days (configuration data) or 31 days (analytics data) in an encrypted database that is provided by the IBM Cloud Database Service.



### Configuration governance
{: #config-results-security}

The configuration information and metadata that is generated by the {{site.data.keyword.compliance_short}}:
* Does not contain any personally identifiable information.
* Is sent over a TLS 1.2+ protected channel by using IBM Cloud Internet Services (powered by Cloudflare). By using Cloud Internet Services there is DDoS protection, a Web Application Firewall, and other network level security mechanisms in place.
* Is encrypted while at rest and in transit to a provider-managed Cloudant database.
* Is securely replicated in US-South and US-East regions.

The evaluation results that are generated by the {{site.data.keyword.compliance_short}}:
* Do not contain any personally identifiable information.
* Is sent over a TLS 1.2+ protected channel by using IBM Cloud Internet Services (powered by Cloudflare). By using Cloud Internet Services there is DDoS protection, a Web Application Firewall, and other network level security mechanisms in place.
* Are encrypted while at rest and in transit to a provider-managed IBM Cloud Databases Elastic Search.
* Are securely replicated across the `us-south` and `us-east` regions.
* Are kept for 7 days before they are deleted.


## Protecting your sensitive data
{: #data-encryption}


You can add a higher level of encryption control to your data at rest (when it is stored) by enabling integration with {{site.data.keyword.keymanagementservicelong_notm}} or {{site.data.keyword.hscrypto}}.

The {{site.data.keyword.compliance_short}} encrypts the results that are generated by the service by using either IBM or customer-managed keys. By default, the encryption keys that secure your data are generated on your behalf through {{site.data.keyword.keymanagementserviceshort}} and managed by IBM. If you want to use and manage your own key, you can integrate a key management service by using the **Data settings** tab in the {{site.data.keyword.compliance_short}} UI.

The following table describes your options for managing the encryption of selected {{site.data.keyword.compliance_short}} components.

| Encryption | Description |
| ---- | ---- |
| IBM-managed | The data that you store in {{site.data.keyword.compliance_short}} is encrypted at rest by using an IBM-managed key. This is the default setting. |
| Customer-managed | The data that is stored in selected {{site.data.keyword.compliance_short}} components is encrypted at rest by using a key that you own and manage. You can use a root key that you manage in [{{site.data.keyword.keymanagementserviceshort}}](/catalog/services/key-protect) or [{{site.data.keyword.hscrypto}}](/catalog/services/hs-crypto). |
{: caption="Table 1. Encryption options for {{site.data.keyword.compliance_short}}" caption-side="top"}

Currently, you can use a customer-managed key to protect {{site.data.keyword.compliance_short}} data that is generated by compliance scans and Security Insights. All other data is encrypted at rest by using an IBM-managed key.
{: note}

### About customer-managed keys
{: #about-encryption}

The {{site.data.keyword.compliance_short}} implements [envelope encryption](#x9860393){:term} by using either IBM-managed or customer-managed keys. Envelope encryption describes encrypting one encryption key with another encryption key. The key used to encrypt the actual data is known as a [data encryption key (DEK)](#x4791827){: term}. The DEK itself is never stored but is wrapped by a second key that is known as the key encryption key (KEK) to create a wrapped DEK. To decrypt data, the wrapped DEK is unwrapped to get the DEK. This process is possible only by accessing the KEK, which in this case is your root key that is stored in your key management service.

Depending on your use case and security requirements, the key management service that is most suited for your organization's needs can vary. To learn more about which key management solution is best for you, see [How is {{site.data.keyword.hscrypto}} different from {{site.data.keyword.keymanagementserviceshort}}?](/docs/hs-crypto?topic=hs-crypto-faq-basics#faq-differentiators-key-protect)
{: note}





### Enabling customer-managed keys
{: #using-byok}

If you choose to work with a key that you manage, you must ensure that valid IAM authorization is assigned between the {{site.data.keyword.compliance_short}} and your preferred key management service. To create that authorization, you can use the following steps.


1. Create an instance of [{{site.data.keyword.keymanagementserviceshort}}](/catalog/services/key-protect) or [{{site.data.keyword.hscrypto}}](/catalog/services/hs-crypto)
2. [Generate or import a root key](/docs/key-protect?topic=key-protect-create-root-keys) to your key management service instance.

    When you use {{site.data.keyword.keymanagementserviceshort}} or {{site.data.keyword.hscrypto}} to create a root key, the service generates cryptographic key material that is rooted in cloud-based HSMs. Be sure that the name of your key does not contain any personal information such as your name or location.
3. Grant service access between your key management service and the {{site.data.keyword.compliance_short}}.

    You must be the account owner or an administrator of the key management service instance that you're working with. You must also have at least Viewer access for the {{site.data.keyword.compliance_short}} service.

    1. Go to **Manage > Access IAM > Authorizations**.
    2. Select {{site.data.keyword.compliance_short}} or {{site.data.keyword.security-advisor_short}} as the source service.

       If you're creating an authorization for compliance scans, select **{{site.data.keyword.compliance_short}}**. To create an authorization for security insights, select **{{site.data.keyword.security-advisor_short}}**.

    3. Select {{site.data.keyword.keymanagementserviceshort}} or {{site.data.keyword.hscrypto}} as the target service.
    4. Assign the Reader role.
    5. Click **Authorize** to confirm the authorization.

    If you're enabling customer-managed keys for Security Insights, be sure that you also have the [required permissions](/docs/security-advisor?topic=security-advisor-service-access) to work with {{site.data.keyword.security-advisor_short}}.
    {: note}

4. Enable the integration in the {{site.data.keyword.compliance_short}}.

    After you create an authorization between your key management service and {{site.data.keyword.compliance_short}}, you can integrate it by using {{site.data.keyword.compliance_short}}. To update your encryption settings:

    1. Go to **Security and Compliance Center > Data settings**.
    2. In the Encryption section, click the **Edit** icon ![Edit icon](../icons/edit-tagging.svg) to manage your encryption settings.
    3. Select the service instance and root key that you want to use to protect your data.
    4. Choose the type of {{site.data.keyword.compliance_short}} results that you want to encrypt with your selected key by toggling either **Compliance scans**, **Security insights**, or both to **On**.
    
        If you chose to disable the encryption key in your key management service it might take up to 15 minutes for SCC to apply that change, after that SCC will not be able to access existing data or generate new one. At any point in time during or after you can re-enable your key.
        {: note}

    5. To return to IBM-managed encryption, use the toggle to turn customer-managed encryption **Off**.

        

